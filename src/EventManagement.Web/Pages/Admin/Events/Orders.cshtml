@page "{id:int}"
@model losol.EventManagement.Pages.Admin.Events.OrdersModel

@{
    ViewData["Title"] = "Ordrer for arrangement";
}
<div class="bg-gray-300 py-3">
    <div class="container">
        <h1>Ordre for arrangement</h1>
        <p> Totalt: @Model.Orders.Count()</p>
        @if (User.IsInRole("SuperAdmin"))
        {
        <form method="post">       
            <button type="submit" asp-page-handler="EnsureOrders" class="btn">Lag ordre for alle registrerte</button>
        </form>
        }
    </div>
</div>

<div class="container py-5 min-height-75">
@{
    foreach (var order in Model.Orders) {
        <div class="card my-2 p-3 border-0">
        <h3>@order.Registration.ParticipantName &nbsp;<order-status value="@order.Status" /></h3>
        <p>Fakturamottaker: @order.CustomerName</p>
        <ul>
        @foreach (var orderline in order.OrderLines) {
            <li>@orderline.ProductName - kr @orderline.Price</li>
        }
        </ul>
        <p>
            <a asp-page="../Orders/Details" asp-route-id="@order.OrderId" class="btn btn-secondary link-decoration-none">Vis ordre</a>
        </p>
        </div>

    }
}
</div>